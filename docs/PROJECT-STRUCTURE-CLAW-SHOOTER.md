# Claw Shooter – Folders, Assets & Scripts

Quick reference for what each claw-shooter-related folder is for, where assets live (and why there are copies), and which scripts to edit.

---

## 1. Claw-shooter folders (what each is for)

| Folder | Purpose | Edit? |
|--------|--------|------|
| **`claw-shooter/`** (repo root) | **Source** for the shooter React app. Contains `src/` (components, hooks, contexts), `index.html`, `public/`. This is the only place you should edit shooter UI/code. | **Yes – edit here** |
| **`claw-shooter/public/`** | **Source** for shooter static assets (GLBs, sounds, skins, etc.). When you run `npm run build:claw-shooter`, everything here is copied into `public/claw-shooter/`. | **Yes – put/update assets here** |
| **`public/claw-shooter/`** | **Build output.** Generated by `npm run build:claw-shooter` (or `npm run build`). Contains the built app (index.html, JS/CSS bundles) plus a copy of `claw-shooter/public/`. Served at `/claw-shooter/`. | **No – do not edit; it gets overwritten on build** |
| **`references/shooter-blitz/`** | Old/reference shooter project. Vite config says: *"Do not use references/shooter-blitz; this is the only source for the shooter"* (meaning `claw-shooter/` is the source). | **No – reference only** |
| **`references/claw shooter reference src/`** | Another reference copy of shooter source (components, etc.). | **No – reference only** |

**Summary:**  
- **Edit code and shooter assets in:** `claw-shooter/` and `claw-shooter/public/`.  
- **Ignore for editing:** `public/claw-shooter/` (build output) and everything under `references/`.

---

## 2. Asset copies (GLB, audio, etc.) – why 5 “copies” and where to update

There are several *logical* places assets appear; not all are independent copies.

### A. Shooter app (canonical source → build output)

- **Source:** `claw-shooter/public/`  
  - Files at root: `G_1.glb` … `G_10.glb`, `map4.glb`, `map.glb`, weapons (`Pistol.glb`, etc.), `Character_*.glb`, `sounds/`, `skins/`, etc.  
  - **Duplicate inside same folder:** same assets also exist under `claw-shooter/public/models/` (root + `models/` are duplicates).
- **Build output:** `public/claw-shooter/`  
  - This is a **copy** of the built app + everything in `claw-shooter/public/`. So you get the same files again at `public/claw-shooter/` and `public/claw-shooter/models/`.

So within the shooter app you have:

1. **`claw-shooter/public/`** (root) – **edit here**
2. **`claw-shooter/public/models/`** – duplicate of same assets; **keep in sync or remove if unused**
3. **`public/claw-shooter/`** (root) – build output; **do not edit**
4. **`public/claw-shooter/models/`** – build output; **do not edit**

### B. Repo root `public/` (legacy paths)

Some code still uses **absolute** paths under the site root:

- **`/models/Character_Soldier.gltf`** → `public/models/Character_Soldier.gltf`  
  - Used by `CharacterSoldier.jsx`. That component is currently **commented out** in `CharacterController.jsx`; the game uses `CharacterPlayer` + `G_1.glb` from `/claw-shooter/` instead.
- **`/sounds/death.mp3`**, **`/sounds/pistol.mp3`** → `public/sounds/`  
  - Used by `Bullet.jsx`, `BotController.jsx`, `CharacterController.jsx` (hardcoded `/sounds/`).

So:

5. **`public/models/`** and **`public/sounds/`** – used only for those legacy paths. If you want a single source of truth, prefer **`claw-shooter/public/`** and either:  
   - Update those components to use `/claw-shooter/sounds/` (and remove dependency on `public/sounds/`), and  
   - Leave `CharacterSoldier` commented out or switch it to use BASE_URL so it loads from `/claw-shooter/`.

### Where to update assets (recommendation)

- **Single place to edit shooter assets:** **`claw-shooter/public/`**.  
  - Add/update GLBs, maps, weapons, **sounds**, **skins** here.  
  - After build, they appear in `public/claw-shooter/` automatically.
- **Optional cleanup:**  
  - Either keep `claw-shooter/public/models/` in sync with the root of `claw-shooter/public/` or delete the `models/` duplicate if nothing references `/claw-shooter/models/` in code.  
  - Prefer updating the three components that use `/sounds/` to use `/claw-shooter/sounds/` so you don’t need to maintain `public/sounds/` for the shooter.
- **Server map loading:** The server loads the map from **`public/claw-shooter/map4.glb`** (see `src/server/shooter/glb-loader.ts`). So the **built** output is what the server uses; that comes from `claw-shooter/public/map4.glb` after build.

---

## 3. Scripts – which are shooter, which to edit

| Script | Purpose | Edit? |
|--------|--------|------|
| **`scripts/run-shooter-house-bots.js`** | Runs 5 house bots for the **shooter** lobby (Berserker, Predator, Tactician, etc.). Uses `shooter-agent-logic.js`. | **Yes – for shooter bot runner** |
| **`scripts/shooter-agent-logic.js`** | Shooter AI personalities and `runShooterAgent`. Used by `run-shooter-house-bots.js` and `test-shooter-agent.js`. | **Yes – for shooter bot behavior** |
| **`scripts/test-shooter-agent.js`** | Test script for a single shooter agent (e.g. `node scripts/test-shooter-agent.js Tactician`). | **Yes – for testing shooter agents** |
| **`scripts/run-house-bots.js`** | House bots for the **main (slither)** game. Uses `agent-logic.js`. | No (different game) |
| **`scripts/agent-logic.js`** | Slither game agent logic. | No (different game) |
| **`scripts/inspect-glb-animations.mjs`** | Utility to inspect GLB animations (e.g. for `G_1.glb`). Default path points to `public/claw-shooter/G_1.glb`. | Yes if you need to tweak the script |

There are **no duplicate copies** of these scripts elsewhere; the only other “shooter” code is in **`references/`** (shooter-blitz, claw shooter reference src), which are reference-only component/app code, not the `scripts/` runners or agent logic.

**Summary:**  
- **Shooter bots / behavior:** edit **`scripts/run-shooter-house-bots.js`** and **`scripts/shooter-agent-logic.js`**.  
- **Shooter app (UI, game logic):** edit **`claw-shooter/src/`** (e.g. `Experience.jsx`, `BotController.jsx`, etc.).  
- **Reference copies** in `references/` are for comparison only; do not use them as the source of truth.

---

## 4. Quick checklist

- **Change shooter UI or game logic** → `claw-shooter/src/` (e.g. `Experience.jsx`, `Map.jsx`, `CharacterPlayer.jsx`).
- **Add/update 3D models, maps, sounds, skins for shooter** → `claw-shooter/public/` (then run `npm run build:claw-shooter` or `npm run build`).
- **Change shooter house bots or AI behavior** → `scripts/shooter-agent-logic.js` and `scripts/run-shooter-house-bots.js`.
- **Do not edit** `public/claw-shooter/` or treat `references/` as the main source.
